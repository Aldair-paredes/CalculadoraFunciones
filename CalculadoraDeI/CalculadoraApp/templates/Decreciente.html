{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Analizador de Función Decreciente</title>
    <link href="{% static 'css/navbar.css' %}" rel="stylesheet" />
    <link href="{% static 'css/explicita.css' %}" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
</head>
<body>
    <div class="app-container">
        <button class="hamburger-menu" type="button" aria-label="Toggle navigation">
            <i class="bi bi-list"></i>
        </button>

        <nav class="sidebar" id="sidebarNav">
            <button class="close-sidebar-btn" type="button" aria-label="Cerrar menú">
                <i class="bi bi-x-lg"></i>
            </button>
            <a class="navbar-brand" href="#">
                <img src="{% static 'img/WOLF.png' %}" alt="Logo UNID" />
                <span>UNID</span>
            </a>
            <ul class="navbar-nav w-100">
                <li class="nav-item"><a class="nav-link" href="{% url 'pagprincipal' %}"><i class="bi bi-house-door-fill me-2"></i>Inicio</a></li>
                <li class="nav-item"><a class="nav-link active" href="{% url 'temas' %}"><i class="bi bi-journal-text me-2"></i>Temas</a></li>
                <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-person-lines-fill me-2"></i>Cuestionario</a></li>
                <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-people-fill me-2"></i>Grupo</a></li>
                <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-chat-dots-fill me-2"></i>Testimonios</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'teorias' %}"><i class="bi bi-book-fill me-2"></i>Teorías</a></li>
            </ul>
            <div class="btn-group mt-auto w-100">
                <a href="{% url 'login' %}" class="btn btn-primary d-flex align-items-center justify-content-center"><i class="bi bi-box-arrow-in-right me-2"></i>Iniciar sesión</a>
                <a href="{% url 'registro' %}" class="btn btn-light d-flex align-items-center justify-content-center"><i class="bi bi-person-plus-fill me-2"></i>Registrarse</a>
            </div>
        </nav>

    <div class="app-container">
        <!-- Aquí iría tu sidebar, mismo código que en tu otro html -->

        <main class="main-content">
            <div class="centered-calculator">
                <div class="calculator-card p-4">
                    <div class="calculator-header mb-3">
                        <h1>Analizador de Función Decreciente</h1>
                        <p>Ingresa la función, intervalo y punto para analizar si es decreciente.</p>
                    </div>

                    <form method="post" novalidate>
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="funcion" class="form-label">Función (en x):</label>
                            <input type="text" class="form-control" id="funcion" name="funcion" placeholder="Ej: -2*x + 3"
                                value="{{ request.POST.funcion|default_if_none:'' }}" required>
                        </div>

                        <div class="mb-3 row">
                            <div class="col">
                                <label for="intervalo_min" class="form-label">Límite inferior del intervalo:</label>
                                <input type="number" step="any" class="form-control" id="intervalo_min" name="intervalo_min"
                                    value="{{ request.POST.intervalo_min|default_if_none:'' }}" required>
                            </div>
                            <div class="col">
                                <label for="intervalo_max" class="form-label">Límite superior del intervalo:</label>
                                <input type="number" step="any" class="form-control" id="intervalo_max" name="intervalo_max"
                                    value="{{ request.POST.intervalo_max|default_if_none:'' }}" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="punto_limite" class="form-label">Punto para calcular el límite:</label>
                            <input type="number" step="any" class="form-control" id="punto_limite" name="punto_limite"
                                value="{{ request.POST.punto_limite|default_if_none:'' }}" required>
                        </div>

                        <div class="mb-4">
                            <label for="graficar" class="form-label">¿Deseas graficar?</label>
                            <select class="form-select" id="graficar" name="graficar">
                                <option value="n" {% if request.POST.graficar != 's' %}selected{% endif %}>No</option>
                                <option value="s" {% if request.POST.graficar == 's' %}selected{% endif %}>Sí</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-calculator me-1"></i> Analizar Función
                        </button>
                    </form>

                    {% if resultado or error %}
                    <div class="result-card mt-4 p-3 border rounded bg-light">
                        <h3>Resultado</h3>
                        {% if error %}
                            <pre class="text-danger">{{ error }}</pre>
                        {% else %}
                            <pre>{{ resultado }}</pre>
                        {% endif %}
                    </div>
                    {% endif %}

                    {% if grafico_url %}
                    <div class="mt-4 text-center">
                        <h4>Gráfica generada:</h4>
                        <img src="{{ grafico_url }}" alt="Gráfica de la función y su derivada" class="img-fluid border" />
                    </div>
                    {% endif %}
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
